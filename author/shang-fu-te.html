<!DOCTYPE html>
<html lang="zh-cmn-hans">
<head>
	<meta charset="utf-8">
	<title>Shangfute's Blog <small>尚福特</small></title>
	<meta name="description" content="">
	<meta name="author" content="尚福特">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://shangfute.github.com/theme/html5.js"></script>
		<![endif]-->
	<link href="http://shangfute.github.com/theme/css/ipython.css" rel="stylesheet">
	<link href="http://shangfute.github.com/theme/css/bootstrap.min.css" rel="stylesheet">
	<link href="http://shangfute.github.com/theme/css/font-awesome.min.css" rel="stylesheet">
	<link href="http://shangfute.github.com/theme/css/local.css" rel="stylesheet">
	<link href="http://shangfute.github.com/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="http://shangfute.github.com/">Shangfute's Blog</a>
			<br><small>Cyber-Physical Systems & Formal Methods</small></h1>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
        
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/Deploy-Mac-mini.html">
		<h2 itemprop="name headline">SSH 远程隧道</h2>
	</a>
	<time datetime="2019-02-01T18:16:24+08:00" itemprop="datePublished">周五 01 二月 2019</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>春节回家想把Mac mini留在家里，当做一台远程主机使用。但是家里没有公网IP，只能通过ssh远程连接出来。</p>
<p>在 Mac 上执行</p>
<p><img alt="1549012441220" src="http://shangfute.github.com/images/1549012441220.png"></p>
<p>建立远程<code>ssh</code>隧道，将本机的<code>22</code>端口转发到远程主机<code>45.32.126.157</code>的 <code>2222</code> 端口上，这样就可以在VPS上管理我的Mac了。</p>
<p><img alt="1549012773824" src="http://shangfute.github.com/images/1549012773824.png"></p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/web.html" rel="category">web</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/web.html" rel="tag">web</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/ssh.html" rel="tag">ssh</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/automated-detection-of-black-box-routers.html">
		<h2 itemprop="name headline">自动化黑盒路由器漏洞检测</h2>
	</a>
	<time datetime="2017-11-29T17:50:41+08:00" itemprop="datePublished">周三 29 十一月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p><a href="https://www.blackhat.com/us-17/briefings.html#automated-detection-of-vulnerabilities-in-black-box-routers-and-other-network-devices">AUTOMATED DETECTION OF VULNERABILITIES IN BLACK-BOX ROUTERS (AND OTHER NETWORK DEVICES)</a></p>
<h2>动机</h2>
<p>网络协议一般是基于公开的标准，但是互联网运行在大量的闭源网络设备上，如路由器和交换机。设备制造商如果对标准协议的实现进行细微的修改，就会导致协议的安全性问题，如产生攻击者可以利用的逻辑漏洞。这样的漏洞可能会影响该制造商的很多设备。找到路由器协议实现的漏洞需要大量精力对设备进行逆向工程。</p>
<h3>研究目标</h3>
<p>一种方法是利用自动化形式化黑盒方法（基于模型的测试）发现协议实现中的变化，而不需要获得设备的源代码。
黑盒：不需要获得设备的源代码或二进制代码。
形式化：基于严谨证明的基础的系统化方法
自动化：手动配置好之后，不需要人工辅助</p>
<h3>基本思想</h3>
<p>将路由器的行为与标准协议（部分）功能模型进行对比
简单的途径：根据预定的启发式方法，手动选择测试
我们的途径：利用符号执行自动生成测试，覆盖所有功能模型</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/hack.html" rel="category">hack</a>
	</span>
	Tags:
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/Stack-pivot.html">
		<h2 itemprop="name headline">劫持栈指针</h2>
	</a>
	<time datetime="2017-11-27T19:29:33+08:00" itemprop="datePublished">周一 27 十一月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>劫持栈指针（Stack pivot）就是改写rsp(esp)，使其指向其他位置。这样栈也就被劫持到攻击者控制的内存上去，然后在该位置做ROP。</p>
<h2>为什么要劫持栈指针？</h2>
<ol>
<li>可以控制的栈溢出的字节比较少，难以构造较长的ROP链，无法直接利用溢出字节进行ROP</li>
<li>开启了PIE保护，栈地址未知，并且无法泄露，但是利用某些技术（如ret2dl-resolve）时，必须知道栈地址，可以通过stack pivot将栈劫持到相应的区域</li>
<li>其它漏洞难以利用，stack pivot 能够将一些非栈溢出的漏洞，变成栈溢出的漏洞，例如，将程序劫持到堆空间中。</li>
</ol>
<h2>利用条件</h2>
<p>如果在尝试了直接Rop发现比较难实现，并且程序中有可以利用进行读写的函数，就可以考虑stack pivot stack pivot</p>
<ol>
<li>可以控制程序执行流</li>
<li>
<p>存在地址已知，内容可控的Buffer</p>
<ul>
<li>BSS，由于进程按页分配内存，分配给bss段的内存大小至少一个页(4k,0x1000)大小。然而一般bss段的内容用不了这么多的空间，并且bss段分配的内存页拥有读写权限</li>
<li>堆，但是需要我们能够泄露堆地址。</li>
</ul>
</li>
<li>
<p>可以控制sp指针。一般来说 …</p></li></ol></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/ctf.html" rel="category">ctf</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/learn.html" rel="tag">learn</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/rop.html" rel="tag">ROP</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/frame-faking.html">
		<h2 itemprop="name headline">栈帧伪造</h2>
	</a>
	<time datetime="2017-11-27T19:29:33+08:00" itemprop="datePublished">周一 27 十一月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>正如这个技巧名字所说的那样，这个技巧就是构造一个虚假的栈帧来控制程序的执行流。</p>
<h3>原理</h3>
<p>概括地讲，我们在之前讲的栈溢出不外乎两种方式</p>
<ul>
<li>控制程序EIP</li>
<li>控制程序EBP</li>
</ul>
<p>其最终都是控制程序的执行流。在frame faking中，我们所利用的技巧便是同时控制EBP与EIP，这样我们在控制程序执行流的同时，也改变程序栈帧的位置。一般来说其payload如下</p>
<div class="highlight"><pre><span></span>buffer padding|fake ebp|leave ret addr|
</pre></div>


<p>即我们利用栈溢出将栈上构造为如上格式。这里我们主要接下后面两个部分</p>
<ul>
<li>函数的返回地址被我们覆盖为执行leave ret的地址，这就表明了函数在正常执行完自己的leave ret后，还会再次执行一次leave ret。</li>
<li>其中fake ebp为我们构造的栈帧的基地址，需要注意的是这里是一个地址。一般来说我们构造的假的栈帧如下</li>
</ul>
<div class="highlight"><pre><span></span>fake ebp
|
v
ebp2|target function addr|leave ret addr|arg1|arg2
</pre></div>


<p>这里我们的<code>fake ebp</code>指向<code>ebp2 …</code></p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/ctf.html" rel="category">ctf</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/learn.html" rel="tag">learn</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/rop.html" rel="tag">ROP</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/UAV-security-formal-analysis.html">
		<h2 itemprop="name headline">无人机安全形式化分析</h2>
	</a>
	<time datetime="2017-11-07T19:29:33+08:00" itemprop="datePublished">周二 07 十一月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>首先，精确定义UAV系统安全。针对通用UAV系统，识别出一组相对完全的安全属性，并且提供统一的格式。安全属性有两部分组成：攻击行为和想要的安全属性。 然后，分析UAV系统是否安全。根据一组安全属性自动生成攻击行为，使用可达性和LTL属性对安全属性建模。</p>
<p>收集UAV系统潜在的攻击方式。通过分析攻击的关联，识别原子攻击行为，使得所有攻击都是原子攻击的组合。利用攻击树形式化表示原子攻击的所有组合，构成全部可能的攻击。</p>
<p>提出从安全属性，自动生成攻击树的算法。然后根据攻击树生成攻击模型，并将每种攻击模型关联到相应的安全属性中。</p>
<p>每种攻击使用形式化语言CSP＃建模，每种安全属性形式化为可达性或暂态属性。根据系统模型、攻击模型和需要的安全属性，可以通过模型检查工具PAT验证系统在某种攻击下，是否满足安全属性。</p>
<h2>创新点</h2>
<ol>
<li>识别出相对完整的UAV系统的安全属性集合，考虑到了各种UAV系统中的子系统。 </li>
<li>提出自动根据安全属性生成攻击树的算法，然后自动生成攻击模型。 </li>
<li>验证系统。</li>
</ol>
<h2>安全需求识别</h2>
<p>首先，识别UAV组件。UAV、地面站、飞行员、通信信道</p>
<p>对每个组件，识别 1. 安全保证 2. 攻击行为。</p>
<p>攻击行为之间可能存在关联：两个攻击结果相同、一个攻击依赖于另一个攻击 …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/research.html" rel="category">research</a>
	</span>
	Tags:
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/probablistic-program-analysis.html">
		<h2 itemprop="name headline">概率程序分析</h2>
	</a>
	<time datetime="2017-10-27T19:29:33+08:00" itemprop="datePublished">周五 27 十月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>研究对不确定性变量进行计算的程序。</p>
<h2>研究目标</h2>
<p>开发静态和动态分析技术，能够将概率程序看成随机过程进行推理。</p>
<h2>应用领域</h2>
<p>分析机器学习中使用的模型：当输入存在噪声时，分类器性能如何变化。</p>
<p>分析随机化计算：系统化建立随机算法的属性。</p>
<p>分析传感器数据融合算法：对融合算法进行推理。</p>
<h2>主要关注的问题</h2>
<p>随机化安全性：给定概率程序P和状态集合U，在N步内程序执行到U的概率是多少。</p>
<p>时序逻辑属性：研究以1的概率成立的时序逻辑属性，包括，几乎确定终止（程序以1的概率终止），几乎确定常返（程序无限次访问某个状态集合），几乎确定持续（程序执行到某个状态集合，并永远留在集合内），以及整改暂态属性体系。</p>
<h2>研究途径</h2>
<p>概率程序的符号化推理：通过符号化决策过程对概率程序的抽象语义进行推理。</p>
<p>使用符号化执行和解空间大小计算的方法根据有限的执行路径获得整个程序的属性。</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/research.html" rel="category">research</a>
	</span>
	Tags:
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/CPS-Anomaly-Detection.html">
		<h2 itemprop="name headline">CPS异常检测-形式化方法</h2>
	</a>
	<time datetime="2017-09-17T19:29:33+08:00" itemprop="datePublished">周日 17 九月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>假设控制算法和估计算法的设计者十分了解物理系统，并且假设物理系统是线性系统。</p>
<p>但是，现在的CPS越来越复杂，并且存在人的影响，其行为很难预测，这些假设不一定成立。</p>
<p>CPS的复杂性
人的复杂性建模 － 航管员
从数据中推理出能够区分想要的和不想要的行为的STL公式。 公式可以指示出每个行为集合可能的原因。 使用鲁棒度的概念在这个行为集合上进行有向搜索。</p>
<p>研究新的算法从数据中学习出STL规格，而STL规格可以使用自然语言解释。</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/research.html" rel="category">research</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/signal-temporal-logic.html" rel="tag">Signal Temporal Logic</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/anomaly-detection.html" rel="tag">Anomaly Detection</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/recognition.html">
		<h2 itemprop="name headline">认知论</h2>
	</a>
	<time datetime="2017-09-14T19:29:33+08:00" itemprop="datePublished">周四 14 九月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>唯理论：从逻辑假设出发，进行推理。形式化方法。知识表示，逻辑推理，符号主义。无法处理不确定性。</p>
<p>经验论：从经验数据中总结公式。机器学习，深度学习。概率，连接主义。黑盒，不知道根据那些规则进行推理的，无法验证。</p>
<p>但是机器学习得出的结论，不够理性，无法知道事件之间潜在因果关系。不知道我是否知道，也不知道我是否不知道。我们如何知道我知道，如何知道我们不知道什么。深度学习需要大量训练数据才能工作，但人类只需要少量的sample就可以学到大量知识。</p>
<p>对概率推理进行建模。因为现在的CPS模型和攻击者模型十分复杂，难以使用数学公式进行建模。特别是对人（控制员和攻击者）的认知模型进行建模。</p>
<p>混合自动机的可达性分析：已知系统模型和规格的验证问题</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/philosophy.html" rel="category">philosophy</a>
	</span>
	Tags:
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/cps-enc.html">
		<h2 itemprop="name headline">几点关于CPS加密的初步想法</h2>
	</a>
	<time datetime="2017-03-21T22:01:49+08:00" itemprop="datePublished">周二 21 三月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>现在的CPS传感器和激励器一般没有加密，因而容易产生各种完整性攻击方式。而直接加密的话，对计算性能要求较高，有没有一种半加密的方式，满足两者的要求。</p>
<p>基于格理论的密码学与随机性有关，是否可以与实际物理系统关联起来，利用物理系统的随机性？</p>
<p>根据CPS的随机性分布，建立满足随机性的程序分析方法。</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/research.html" rel="category">research</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/cps.html" rel="tag">cps</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/crypto.html" rel="tag">crypto</a>
	</span>
</div>
<hr>
        
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<a href="http://shangfute.github.com/cps-security.html">
		<h2 itemprop="name headline">CPS 安全综述</h2>
	</a>
	<time datetime="2017-02-23T09:25:08+08:00" itemprop="datePublished">周四 23 二月 2017</time>
	&nbsp;—&nbsp;
	<span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
		<span itemprop="name">尚福特</span>
	</span>
	<div class="summary"><p>本文是对<code>Cyber-Physical Systems Security: a Systematic Mapping Study</code>的学习笔记。</p>
<h2>0. 引言</h2>
<p>Cyber-physical systems (CPS) 是完成<strong>计算、通信、控制</strong>的软硬件的无缝集成，与物理组件联合设计。由控制器、传感器、激励器三大组件构成。在2006年左右提出。</p>
<p>CPS的应用领域包括：可信医疗设备、生活助理、交通管控、能源保护、环境控制、航空、关键基础设施（电力、水资源、通信系统等）、制造业、智慧建筑等。可以预见CPS的发展将使20世纪的IT技术革命相形见绌。</p>
<p>CPS与传统IT系统的区别：CPS是资源受限的实时系统。</p>
<p>毫无疑问这些系统的<strong>安全性(security)</strong>是需要考虑的主要因素。环境的不确定性、安全攻击、物理设备的故障都可能导致安全问题。</p>
<p>给定CPS中使用的<strong>估计和控制算法</strong>，设计要满足的 …</p></div>
	Category:
	<span itemprop="articleSection">
		<a href="http://shangfute.github.com/category/research.html" rel="category">research</a>
	</span>
	Tags:
 
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/cps.html" rel="tag">cps</a>
	</span>
	<span itemprop="keywords">
		<a href="http://shangfute.github.com/tag/security.html" rel="tag">security</a>
	</span>
</div>
<hr>
 <div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="http://shangfute.github.com/author/shang-fu-te.html">1</a></li>
    <li class=""><a href="http://shangfute.github.com/author/shang-fu-te2.html">2</a></li>
    <li class=""><a href="http://shangfute.github.com/author/shang-fu-te3.html">3</a></li>

    <li class="next"><a href="http://shangfute.github.com/author/shang-fu-te2.html">Next &rarr;</a></li>

</ul>
</div> 		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-success">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://shangfute.github.com">Shangfute's Blog</a></li>
							<li><a href="http://shangfute.github.com/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
							<li><a href="http://shangfute.github.com/feeds/all.rss.xml" type="application/rss+xml"><i class="fa fa-rss "></i> rss</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="mailto://shangfute@163.com">shangfute</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://shangfute.github.com/category/crypto.html">crypto (4)</a></li>
							<li><a href="http://shangfute.github.com/category/ctf.html">ctf (3)</a></li>
							<li><a href="http://shangfute.github.com/category/hack.html">hack (1)</a></li>
							<li><a href="http://shangfute.github.com/category/life.html">life (9)</a></li>
							<li><a href="http://shangfute.github.com/category/philosophy.html">philosophy (1)</a></li>
							<li><a href="http://shangfute.github.com/category/programming.html">programming (3)</a></li>
							<li><a href="http://shangfute.github.com/category/research.html">research (5)</a></li>
							<li><a href="http://shangfute.github.com/category/web.html">web (3)</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Links</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://music.shangfute.com/">musics</a></li>
							<li><a href="http://pictures.shangfute.com">timeline</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; 尚福特 2016</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="http://shangfute.github.com/theme/js/jquery-2.1.1.min.js"></script>
<script src="http://shangfute.github.com/theme/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
</body>
</html>